# クイックスタートガイド: 銀行口座管理アプリ

**日付**: 2025-09-18  
**目的**: 中核機能の手動テストおよび検証手順の整理

## 前提条件

### 開発環境

- Xcode 15.0 以上
- iOS Simulator 15.0 以上
- Swift 5.9 以上

### プロジェクトの準備

1. `BankPocket.xcodeproj` を Xcode で開く
2. テスト用デバイスとして iPhone 14 以降のシミュレータを選択
3. ビルドして実行（⌘ + R）

## 機能検証フロー

### 1. 初回起動

期待挙動:

- アプリが正常に起動する
- 空の口座一覧が表示される
- 「口座を追加」ボタンが見える
- エラーやクラッシュが発生しない

手順:

1. Xcode からアプリを起動
2. 空状態の UI が表示されることを確認
3. コンソールにエラーが出力されていないか確認

判定基準:

- ✅ クラッシュなしで起動する
- ✅ 空状態 UI が表示される
- ✅ コンソールにエラーが出ない

### 2. 初めての口座登録

テストデータ:

- 銀行名: みずほ銀行
- 支店名: 渋谷支店
- 支店番号: 123
- 口座番号: 1234567

手順:

1. 「口座を追加」をタップ
2. 必須項目を入力
3. 「保存」をタップ
4. 一覧画面へ戻る

期待挙動:

- 入力が受け付けられる
- バリデーションエラーが表示されない
- 一覧に新しい口座が追加される
- 表示内容が入力値と一致する

判定基準:

- ✅ フォーム送信が成功する
- ✅ 一覧に口座が表示される
- ✅ 表示内容が正しい
- ✅ 空状態の UI が消える

### 3. 複数口座の登録

テストデータ:

```text
口座2:
- 銀行名: 三菱UFJ銀行
- 支店名: 新宿支店
- 支店番号: 456
- 口座番号: 9876543

口座3:
- 銀行名: 三井住友銀行
- 支店名: 池袋支店
- 支店番号: 789
- 口座番号: 5555555
```

手順:

1. 上記データで口座2を登録
2. 同様に口座3を登録
3. 一覧に3件の口座が表示されるか確認
4. 表示順が銀行名の昇順になっているか確認

判定基準:

- ✅ すべての口座が登録できる
- ✅ 一覧に3件表示される
- ✅ 表示順が銀行名の昇順になる
- ✅ 重複や表示崩れがない

### 4. タグの作成と割り当て

テストタグ:

- 私（青）
- 妻（ピンク）
- 家計（オレンジ）

手順:

1. タグ管理画面へ移動
2. 「私」タグを青で作成
3. 「妻」タグをピンクで作成
4. 「家計」タグをオレンジで作成
5. 各口座にそれぞれ適切なタグを割り当て

期待挙動:

- タグが登録される
- 色が正しく表示される
- 割り当て操作が成功する
- 口座一覧にタグが表示される

判定基準:

- ✅ タグが意図した色で表示される
- ✅ 各口座にタグが表示される
- ✅ エラーが発生しない

### 5. タグによる絞り込み

手順:

1. 「私」タグのフィルターを有効化
2. 「私」タグ付きの口座のみ表示されることを確認
3. 「妻」タグでも同様に確認
4. フィルターを解除し、全口座が表示されることを確認

期待挙動:

- 選択したタグのみ表示される
- フィルターを解除すると全件に戻る
- UI 上でフィルター状態がわかる

判定基準:

- ✅ フィルターが正しく機能する
- ✅ 解除で全口座が戻る
- ✅ UI でフィルター状態が把握できる

### 6. 口座情報の編集

手順:

1. みずほ銀行の口座を開く
2. 口座番号を 7777777 に変更
3. 「保存」で確定
4. 一覧に更新内容が反映されたか確認

期待挙動:

- フォームに既存値が表示される
- 変更が保存される
- 一覧が最新情報に更新される
- updatedAt が更新される

判定基準:

- ✅ 編集が正常に行える
- ✅ 変更内容が表示に反映される
- ✅ データが破損しない

### 7. 検索機能

手順:

1. 検索欄に「みずほ」と入力し、対象口座のみ表示されるか確認
2. 続けて「123」と入力し、支店番号を含む口座がヒットするか確認
3. 検索欄をクリアし、全件表示に戻ることを確認

期待挙動:

- 銀行名・支店番号に対してケースインセンシティブに一致する
- 入力に応じて即時に一覧が更新される
- クリアで全件表示に戻る

判定基準:

- ✅ 銀行名検索が機能する
- ✅ 支店番号検索が機能する
- ✅ 大文字小文字に依存しない
- ✅ クリアで全件表示に戻る

### 8. 口座の削除

手順:

1. 3件目の口座を削除対象に選択
2. スワイプ削除または削除ボタンを実行
3. 確認ダイアログで削除を確定
4. 一覧から口座が消えているか確認
5. 他口座に設定したタグが残っているか確認

期待挙動:

- 確認ダイアログが表示される
- 口座データが削除される
- 関連タグの割り当ても解除される
- タグ自体は削除されない

判定基準:

- ✅ 確認が必須になっている
- ✅ 口座が完全に削除される
- ✅ タグは他口座に残る
- ✅ 一覧表示が更新される

### 9. アプリ終了後の永続性

手順:

1. アプリを強制終了
2. 再起動
3. 口座・タグ・関連付けが残っているか確認

期待挙動:

- すべての口座が保持される
- タグ情報も保持される
- 割り当て関係が維持される
- データ破損が起きない

判定基準:

- ✅ 口座が失われない
- ✅ タグが失われない
- ✅ 関連付けが維持される
- ✅ データ破損がない

### 10. エラーハンドリング

手順:

1. 銀行名が空の状態で保存を試す
2. 支店番号に文字列を入力して保存を試す
3. 重複する口座（銀行名 + 支店番号 + 口座番号が同じ）を作成する
4. 使用中のタグを削除しようとする

期待挙動:

- バリデーションエラーが表示される
- 日本語でわかりやすいエラーメッセージが出る
- クラッシュやデータ破損が起きない
- 修正方法が明示される

判定基準:

- ✅ 入力検証が機能する
- ✅ メッセージが日本語で表示される
- ✅ 異常時もクラッシュしない
- ✅ 改善方法がわかる

## パフォーマンス検証

### メモリ使用量

手順:

1. Xcode のメモリデバッガを開く
2. タグ付きで 20 口座以上を登録
3. 画面遷移を一通り試す
4. メモリ使用量が 50MB 未満か確認

判定基準:

- ✅ 20 口座時でも 50MB 未満
- ✅ メモリリークが発生しない
- ✅ 操作が重くならない

### UI 応答性

手順:

1. ストレステストとして 50 口座以上登録
2. 一覧スクロールの滑らかさを確認
3. タグフィルター操作の応答を確認
4. 検索操作の応答を確認

判定基準:

- ✅ スクロールが 60fps 近辺を維持
- ✅ データ操作が 100ms 未満で完了
- ✅ UI のフリーズが起きない

## 受け入れチェックリスト

### 基本機能

- [ ] アプリが正常に起動する
- [ ] 口座登録が機能する
- [ ] 一覧表示が正しく行われる
- [ ] タグの作成と割り当てができる
- [ ] タグフィルターが機能する
- [ ] 口座編集が機能する
- [ ] 口座削除が機能する
- [ ] 検索が機能する
- [ ] データが永続化される

### ユーザー体験

- [ ] 表示テキストがすべて日本語
- [ ] 直感的に操作できる
- [ ] エラーメッセージがわかりやすい
- [ ] UI が 60fps を維持
- [ ] メモリ使用量が 50MB 未満

### データ整合性

- [ ] データ破損がない
- [ ] 入力検証が適切
- [ ] 関連データの整合性が保たれる
- [ ] エラー時も安全に復帰できる

**ステータス**: ✅ 完了 — クイックスタートガイドを利用可能
