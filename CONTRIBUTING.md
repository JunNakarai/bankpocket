# コントリビューションガイド

本プロジェクトへの貢献に興味を持っていただきありがとうございます。以下の方針に従い、スムーズな開発とレビューを行いましょう。

## 開発フロー

1. Issue で課題を整理し、作業範囲と再現手順を共有してください。
2. ブランチは `feature/<概要>` または `fix/<概要>` のように意味が分かる名前を付けます。
3. 変更はできる限り小さく、単一の関心事に絞ったプルリクエストを作成します。
4. プルリクエストには以下を含めてください。
   - 関連するIssueリンク
   - ユーザー向けの変更点概要
   - UIに影響する場合は最新のスクリーンショット
   - `xcodebuild build` / `xcodebuild test` の結果ログ

## コーディング規約

- Swift API Design Guidelinesに従い、意味のある命名を行ってください。
- インデントはスペース4つを基本とします。
- `guard` による早期リターンでネストを浅く保ちます。
- 責務を `// MARK:` コメントで区切り、読みやすさを意識します。
- ビューは `View` で終わる名称、モデルは単数形、再利用ヘルパーは `Utils/` にまとめます。
- 依存関係はシングルトンよりも依存性注入（DI）を優先します。

## ディレクトリ配置

- `bankpocket/Models/`: ドメインモデル・SwiftDataスキーマ・バリデーション
- `bankpocket/Views/`: SwiftUIビュー
- `bankpocket/Services/`: 永続化、CSV入出力、API
- `bankpocket/Utils/`: 共通ユーティリティとプレビュー用フィクスチャ
- テストは同階層の `bankpocketTests/` と `bankpocketUITests/` に作成し、対象コードと同じ構造を維持します。

## テスト

- すべての新規・変更ロジックにはユニットテストを追加し、バリデーション分岐とSwiftDataフェッチパスを網羅してください。
- UI変更時はUIスモークテストに最低限のアサーションを追加します。
- プッシュ前に以下のコマンドでテストを実行し、成功ログをプルリクエストに添付します。

```bash
xcodebuild test \
  -project bankpocket.xcodeproj \
  -scheme bankpocket \
  -destination 'platform=iOS Simulator,name=iPhone 16,OS=26.0'
```

## コミットとレビュープロセス

- コミットメッセージは Conventional Commits（例: `feat:`, `fix:`, `chore:`, `docs:`）を使用します。
- ビルドが通らない状態でのコミットは避け、必要に応じてスカッシュを検討してください。
- SwiftDataスキーマや `bankpocket.entitlements` を変更する場合は、レビュアーへの説明とマイグレーション手順を必ず含めます。

## セキュリティ・プライバシーの配慮

- 本番データや個人情報を含むCSVはリポジトリに追加しないでください。
- APIキーやシークレットはリポジトリ外で安全に管理します。
- 永続化レイヤーの変更時はデータ損失防止策とアップグレード手順を明記してください。

ご不明点があればIssueまたはプルリクエスト上で質問してください。皆さまのコントリビューションをお待ちしています！
